{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nlet board;\nlet score = 0;\nconst rows = 4;\nconst columns = 4;\n\nconst startBtn = document.querySelector('.start');\nconst scoreItem = document.querySelector('.game-score');\nconst restartBtn = document.querySelector('.restart');\nconst againBtn = document.querySelector('.again');\nconst containerLose = document.querySelector('.container-lose');\n\nlet bestScore = localStorage.getItem('2048-highScore') || 0;\nconst bestScoreElem = document.querySelector('.best-score');\n\nbestScoreElem.textContent = bestScore;\n\nstartBtn.addEventListener('click', startGame);\nrestartBtn.addEventListener('click', restartGame);\nagainBtn.addEventListener('click', restartGame);\n\nfunction startGame() {\n  clearBoard();\n  resetScore();\n  setGame();\n  startBtn.classList.add('hidden');\n  restartBtn.classList.remove('hidden');\n  document.querySelector('.message-start').classList.add('hidden');\n}\n\nfunction restartGame() {\n  clearBoard();\n  resetScore();\n  startBtn.classList.remove('hidden');\n  restartBtn.classList.add('hidden');\n  containerLose.classList.add('hidden');\n  document.querySelector('.message-start').classList.remove('hidden');\n}\n\nfunction clearBoard() {\n  const boardElement = document.querySelector('.board');\n\n  boardElement.innerHTML = '';\n}\n\nfunction resetScore() {\n  score = 0;\n  scoreItem.innerText = score;\n}\n\nfunction setGame() {\n  board = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      const tile = document.createElement('div');\n\n      tile.id = r.toString() + '-' + c.toString();\n\n      const num = board[r][c];\n\n      updateTile(tile, num);\n      document.querySelector('.board').append(tile);\n    }\n  }\n\n  setNew();\n  setNew();\n}\n\nfunction updateTile(tile, num) {\n  tile.innerText = '';\n  tile.classList.value = '';\n  tile.classList.add('tile');\n\n  if (num > 0) {\n    tile.innerText = num.toString();\n\n    if (num <= 2048) {\n      tile.classList.add('tile--' + num.toString());\n    } else {\n      tile.classList.add('tile--2048');\n    }\n  }\n  checkForWin();\n}\n\ndocument.addEventListener('keyup', (e) => {\n  let boardChanged = false;\n\n  switch (e.code) {\n    case 'ArrowLeft':\n      boardChanged = slideLeft();\n      break;\n    case 'ArrowRight':\n      boardChanged = slideRight();\n      break;\n    case 'ArrowUp':\n      boardChanged = slideUp();\n      break;\n    case 'ArrowDown':\n      boardChanged = slideDown();\n      break;\n  }\n\n  if (boardChanged) {\n    setNew();\n    scoreItem.innerText = score;\n\n    if (score > bestScore) {\n      bestScore = score;\n      bestScoreElem.textContent = bestScore;\n      localStorage.setItem('2048-bestScore', bestScore);\n    }\n  }\n});\n\nfunction filterZero(row) {\n  return row.filter((num) => num !== 0);\n}\n\nfunction slide(originalRow) {\n  let row = [...originalRow];\n\n  row = filterZero(row);\n\n  for (let i = 0; i < row.length - 1; i++) {\n    if (row[i] === row[i + 1]) {\n      row[i] *= 2;\n      row[i + 1] = 0;\n      score += row[i];\n    }\n  }\n\n  row = filterZero(row);\n\n  while (row.length < columns) {\n    row.push(0);\n  }\n\n  return row;\n}\n\nfunction slideLeft() {\n  let boardChanged = false;\n\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n    const originalRow = [...row];\n\n    row = slide(row);\n    board[r] = row;\n\n    if (!boardChanged\n      && !originalRow.every((val, index) => val === row[index])) {\n      boardChanged = true;\n    }\n\n    for (let c = 0; c < columns; c++) {\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateTile(tile, num);\n    }\n  }\n\n  return boardChanged;\n}\n\nfunction slideRight() {\n  let boardChanged = false;\n\n  for (let r = 0; r < rows; r++) {\n    let row = board[r];\n    const originalRow = [...row];\n\n    row.reverse();\n    row = slide(row);\n    board[r] = row.reverse();\n\n    if (\n      !boardChanged\n      && !originalRow.every((val, index) => val === row[index])\n    ) {\n      boardChanged = true;\n    }\n\n    for (let c = 0; c < columns; c++) {\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateTile(tile, num);\n    }\n  }\n\n  return boardChanged;\n}\n\nfunction slideUp() {\n  let boardChanged = false;\n\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n    const originalRow = [...row];\n\n    row = slide(row);\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateTile(tile, num);\n    }\n\n    if (!boardChanged\n      && !originalRow.every((val, index) => val === row[index])) {\n      boardChanged = true;\n    }\n  }\n\n  return boardChanged;\n}\n\nfunction slideDown() {\n  let boardChanged = false;\n\n  for (let c = 0; c < columns; c++) {\n    let row = [board[0][c], board[1][c], board[2][c], board[3][c]];\n    const originalRow = [...row];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n\n    for (let r = 0; r < rows; r++) {\n      board[r][c] = row[r];\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n      const num = board[r][c];\n\n      updateTile(tile, num);\n    }\n\n    if (!boardChanged\n      && !originalRow.every((val, index) => val === row[index])) {\n      boardChanged = true;\n    }\n  }\n\n  return boardChanged;\n}\n\nfunction setNew() {\n  if (!hasEmptyTile()) {\n    return;\n  }\n\n  let found = false;\n\n  while (!found) {\n    const r = Math.floor(Math.random() * rows);\n    const c = Math.floor(Math.random() * columns);\n\n    if (board[r][c] === 0) {\n      const randomNum = Math.floor(Math.random() * 10);\n\n      board[r][c] = randomNum === 0 ? 4 : 2;\n\n      const tile = document.getElementById(r.toString() + '-' + c.toString());\n\n      tile.innerText = board[r][c];\n      tile.classList.add('tile--' + board[r][c]);\n      found = true;\n    }\n  }\n\n  if (isGameOver()) {\n    containerLose.classList.remove('hidden');\n  }\n}\n\nfunction hasEmptyTile() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction isGameOver() {\n  if (hasEmptyTile()) {\n    return false;\n  }\n\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns - 1; c++) {\n      if (board[r][c] === board[r][c + 1]) {\n        return false;\n      }\n    }\n  }\n\n  for (let c = 0; c < columns; c++) {\n    for (let r = 0; r < rows - 1; r++) {\n      if (board[r][c] === board[r + 1][c]) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction checkForWin() {\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < columns; c++) {\n      if (board[r][c] === 2048) {\n        document.querySelector('.message-win').classList.remove('hidden');\n\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}